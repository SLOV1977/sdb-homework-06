# Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Рахманов Александр`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

#### Решение.

### Задание 1.

Опишите основные преимущества использования масштабирования методами:

    - активный master-сервер и пассивный репликационный slave-сервер;
    - master-сервер и несколько slave-серверов;

*Дайте ответ в свободной форме.*

**активный master-сервер и пассивный репликационный slave-сервер** обеспечивают:
    - высокую доступность данных (при выходе из строя master-сервера можно быстро переключиться на slave);
    - резервное копирование (slave-сервер автоматически хранит копию данных, что упрощает восстановление);
    - снижение нагрузки (slave можно использовать для чтения данных, разгружая master);
    - простоту реализации (базовая конфигурация проще в настройке и поддержке);
    - синхронизацию (данные всегда актуальны благодаря репликации).

**master-сервер и несколько slave-серверов** обеспечивают:
    - масштабирование чтения - запросы на чтение распределяются между несколькими slave-серверами, что позволяет обслуживать больше пользователей и снижает нагрузку на каждый сервер;
    - гибкость ролей - разные slave-сервера можно использовать для разных задач (например, один для аналитики, другой для тестирования), не нагружая master;
    - географическое распределение - slave-серверы могут быть размещены в разных регионах, уменьшая задержки для пользователей в разных локациях;
    - повышенная отказоустойчивость - несколько slave-серверов увеличивают надёжность системы, так как данные доступны на нескольких серверах, что упрощает восстановление при сбоях на master-сервере.

---

### Задание 2.

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

    - пользователи,
    - книги,
    - магазины (столбцы произвольно).

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.*


**1. Серверное распределение:**

    - Master-сервер для координации запросов
    - 3 группы серверов для горизонтального шардирования
    - 3 группы серверов для вертикального шардирования
    - Балансировщик нагрузки
    - Система репликации данных

**2. Режимы работы серверов:**

    - Master-сервер: режим записи и чтения, координация запросов, маршрутизация данных.
    - Горизонтальные шарды: режим чтения/записи, автономная обработка запросов, репликация данных.
    - Вертикальные шарды: специализированный режим, обработка определенных типов данных, оптимизированная производительность.

**3. Преимущества системы:**

    - Горизонтальное шардирование: линейное масштабирование, снижение времени отклика, распределение нагрузки, высокая доступность.
    - Вертикальное шардирование: оптимизация производительности, уменьшение размера таблиц, упрощение обслуживания, улучшенная изоляция данных.

**4. Схема архитектуры:**

```
                                                                  [Клиент] → [Балансировщик нагрузки] → [Master-сервер]
                                                                                        |
 _______________________________________________________________________________________|
|
|
|
|                                                      ___________________________________________________________________ 
|                                                     |Horizontal shard 1                                                 |
|                                                     |                                                                   |
|_____________________________________________________|Пользователи: Разбиение по диапазону ID 1-50000                    |
|                                                     |Книги: Разбиение по хэш-функции genre_id % 3 = 0                   |
|                                                     |Магазины: Разбиение по географическому признаку (регионы России)   |
|                                                     |___________________________________________________________________|
|                                                                                       |
|                               ________________________________________________________|________________________________________________________
|                              |                                                        |                                                        |
|     _________________________|_________________________      _________________________|_________________________      _________________________|_________________________
|    |Vertical shard 1                                   |    |Vertical shard 2                                   |    |Vertical shard 3                                   |
|    |                                                   |    |                                                   |    |                                                   |
|    |Пользователи: id, username, email, password_hash   |    |Пользователи: first_name, last_name, phone, address|    |Пользователи: payment_info, purchase_history       |
|    |Книги: id, title, author                           |    |Книги: description, price, stock                   |    |Книги: reviews, ratings, tags                      |
|    |Магазины: id, name, location, contact              |    |Магазины: inventory, pricing, discounts            |    |Магазины: staff_info, working_hours                |
|    |___________________________________________________|    |___________________________________________________|    |___________________________________________________|
|        
|
|
|                                                      ___________________________________________________________________ 
|                                                     |Horizontal shard 2                                                 |
|                                                     |                                                                   |
|_____________________________________________________|Пользователи: Разбиение по диапазону ID 50001-100000               |
|                                                     |Книги: Разбиение по хэш-функции genre_id % 3 = 1                   |
|                                                     |Магазины: Разбиение по географическому признаку (регионы СНГ)      |
|                                                     |___________________________________________________________________|
|                                                                                       |
|                               ________________________________________________________|________________________________________________________
|                              |                                                        |                                                        |
|     _________________________|_________________________      _________________________|_________________________      _________________________|_________________________
|    |Vertical shard 1                                   |    |Vertical shard 2                                   |    |Vertical shard 3                                   |
|    |                                                   |    |                                                   |    |                                                   |
|    |Пользователи: id, username, email, password_hash   |    |Пользователи: first_name, last_name, phone, address|    |Пользователи: payment_info, purchase_history       |
|    |Книги: id, title, author                           |    |Книги: description, price, stock                   |    |Книги: reviews, ratings, tags                      |
|    |Магазины: id, name, location, contact              |    |Магазины: inventory, pricing, discounts            |    |Магазины: staff_info, working_hours                |
|    |___________________________________________________|    |___________________________________________________|    |___________________________________________________|
|
|
|
|                                                      ___________________________________________________________________ 
|                                                     |Horizontal shard 3                                                 |
|                                                     |                                                                   |
|_____________________________________________________|Пользователи: Разбиение по диапазону ID 100001+                    |
                                                      |Книги: Разбиение по хэш-функции genre_id % 3 = 2                   |
                                                      |Магазины: Разбиение по географическому признаку (международные)    |
                                                      |___________________________________________________________________|
                                                                                        |
                                ________________________________________________________|________________________________________________________
                               |                                                        |                                                        |
      _________________________|_________________________      _________________________|_________________________      _________________________|_________________________
     |Vertical shard 1                                   |    |Vertical shard 2                                   |    |Vertical shard 3                                   |
     |                                                   |    |                                                   |    |                                                   |
     |Пользователи: id, username, email, password_hash   |    |Пользователи: first_name, last_name, phone, address|    |Пользователи: payment_info, purchase_history       |
     |Книги: id, title, author                           |    |Книги: description, price, stock                   |    |Книги: reviews, ratings, tags                      |
     |Магазины: id, name, location, contact              |    |Магазины: inventory, pricing, discounts            |    |Магазины: staff_info, working_hours                |
     |___________________________________________________|    |___________________________________________________|    |___________________________________________________|


```
---
